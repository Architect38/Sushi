var dataLayer=dataLayer||[];if("object"!=typeof k50Tracker)var k50Tracker=function(){var _instances=[],_k50Tracker=function(){var self=this;function rotate(){if(!/^\d+$/.test(self._settings.siteId))return!1;if(self._settings.visitParameters)var e=self._settings.visitParameters;else e=getVisitParams();if(e.userTimestamp=Math.round((new Date).getTime()/1e3),e.isRobot=isRobot(),getCookie("k50uuid"))e.uuid=null!==self._uuid?self._uuid:getCookie("k50uuid");else{var t=null!==self._uuid?self._uuid:generateUUID();setCookie(t,"k50uuid",self._settings.uuidInterval),e.uuid=t,e.isNewVisit=!0}if(isNewVisit()?(setCookie(getVisitParamsHash(!1),"k50lastvisit",self._settings.lastVisit),e.isNewVisit=!0,getCookie("k50cookie")&&(e.cookie=getCookie("k50cookie")),e.sid=generateUUID()):(e.isNewVisit=!1,getCookie("k50cookie")&&(e.cookie=getCookie("k50cookie")),getCookie("k50sid")?e.sid=getCookie("k50sid"):(e.sid=generateUUID(),e.isNewVisit=!0)),e.isNewVisit){setLocalData();for(var s=getVisitParams(),n=Object.keys(s),r=0;r<n.length;r++)e[n[r]]=s[n[r]]}self._settings.isNewVisit=e.isNewVisit,self._result.sid=e.sid,self._result.uuid=e.uuid,e.label=self._settings.label,e.product=self._settings.product,setCookie(e.uuid||"","k50uuid",self._settings.uuidInterval),setCookie(e.sid||"","k50sid",self._settings.sessionInterval),delete e.timestamp;var i=self._settings.urlRotate+"/"+self._settings.siteId;"1169056832"==self._settings.siteId&&(i=i+"?sid="+e.sid+"&uuid="+e.uuid),sendRequest(i,"POST",e,function(e){if(self._result=k50JSON.parse(e),self._result){if(self._result.settings)for(var t in self._result.settings)if(self._result.settings.hasOwnProperty(t)){if(~t.indexOf("cssSelector")&&self._settings[t])continue;self._settings[t]=self._result.settings[t]}if(setCookie(getVisitParamsHash(!0),"k50lastvisit",self._settings.lastVisit),setCookie(self._result.uuid||"","k50uuid",self._settings.uuidInterval),setCookie(self._result.cookie||"","k50cookie","code"==self._result.rotatorType?self._settings.codeInterval:self._settings.phoneInterval),setCookie(self._result.sid||"","k50sid",self._settings.sessionInterval),0!==self._result.widgets.ids.length)for(id in self._result.widgets.ids)self._result.widgets.ids.hasOwnProperty(id)&&openWidget(self._result.widgets.ids[id]);self.change(),Analytics.sendClientId(),Metrika.sendMetrikaClientId()}})}this._sendRetries=0,this._domReadyInterval=0,this._settings={mode:"phone",label:"",product:"",servers:["//collect.k50.ru"],urlRotate:"/rotate",urlParams:"/send/params",urlEvent:"/event/save",urlCallback:"/callback/add",landing:!1,allowCallback:!1,isNewVisit:!1,mod:5040,domReady:"k50BeforeDomReady",sessionInterval:180,uuidInterval:5256e3,codeInterval:180,phoneInterval:43200,lastVisit:525600},this._result={},this._settings.visitParameters=getVisitParams(),this._uuid=null,this.init=function(e){for(var t in e)e.hasOwnProperty(t)&&(this._settings[t]=e[t]);var s=[];if(getCookie("k50servers")&&(s=getCookie("k50servers").split(",")),s&&s.length&&(this._settings.servers=s),setInterval(function(){rotate()},864e5),"k50DomReady"==this._settings.domReady&&k50DomReady(function(){openFrame()}),"k50BeforeDomReady"==this._settings.domReady){openFrame();var n=n||{},r=this._settings.siteId+"";n[r]=setInterval(this.change,1e3),k50DomReady(function(){change(),clearInterval(n[r])})}},this.sendEvent=function(e){"string"==typeof e.name?"string"==typeof e.value?"string"==typeof e.event?sendRequest(self._settings.urlEvent+"/"+self._settings.siteId,"POST",{sid:self._result.sid,uuid:self._result.uuid,name:e.name,val:e.value,event:e.event,landing:window.location.href}):console.warn("K50 Tracker Error: \u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 event"):console.warn("K50 Tracker Error: \u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 value"):console.warn("K50 Tracker Error: \u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0434\u043b\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 name")},this.getResultData=function(){var e={};return e.sid=self._result.sid,e.uuid=self._result.uuid,e.counterId=self._settings.siteId,e.label=self._settings.label,e.product=self._settings.product,e.isNewVisit=self._settings.isNewVisit,"code"==self._result.rotatorType&&self._result.code&&(e.code=self._result.code),"phone"==self._result.rotatorType&&self._result.phones&&(e.phones=self._result.phones),self._result.ip&&(e.ip=self._result.ip),self._result.widgets&&self._result.widgets.ids&&(e.widgets=self._result.widgets),self._result.geo&&(e.geo=self._result.geo),self._result.userAgent&&(e.userAgent=self._result.userAgent),e},this.change=function(forceRotate,params){if(void 0===forceRotate&&(forceRotate=!1),void 0===params&&(params=!1),forceRotate)params&&(params.landing&&(this._settings.landing=params.landing),params.label&&(this._settings.label=params.label),params.product&&(this._settings.product=params.product)),rotate();else{if("code"==self._result.rotatorType&&Code.setCode(self._result),"phone"==self._result.rotatorType&&Phone.setNumber(self._result),self._result.callback){var data={};data.sid=self._result.sid,data.uuid=self._result.uuid,"code"==self._result.rotatorType&&self._result.code&&(data.code=self._result.code),"phone"==self._result.rotatorType&&self._result.phones&&(data.phones=self._result.phones);try{eval(self._result.callback)}catch(e){console.log(e)}}if("function"==typeof self._settings.callback){var data={};data.sid=self._result.sid,data.uuid=self._result.uuid,"code"==self._result.rotatorType&&self._result.code&&(data.code=self._result.code),"phone"==self._result.rotatorType&&self._result.phones&&(data.phones=self._result.phones),self._settings.callback.call(window,data)}}},this.planCallback=function(e){var t={};if(t.sid=self._result.sid,t.uuid=self._result.uuid,!e.visitorPhone)return console.log("error - visitorPhone should not be empty"),!1;if(t.visitorPhone=e.visitorPhone,e.datePlanned?t.datePlanned=e.datePlanned:t.datePlanned=0,e.counterId?t.counterId=e.counterId:t.counterId=self._settings.siteId,e.widgetId&&(t.widgetId=e.widgetId),e.voiceMessage&&(t.voiceMessage=e.voiceMessage),e.userTimezoneOffset&&(t.userTimezoneOffset=e.userTimezoneOffset),sendRequest(self._settings.urlCallback,"POST",t),dataLayer.push({event:"k50Callback"}),!e.dontSendEvent){if(e.gaEventParams||(e.gaEventParams={hitType:"event",eventCategory:"K50Tracker",eventAction:"callback",eventLabel:document.URL}),window.ga)for(var s=window.ga.getAll(),n=[],r=0;r<s.length;r++){for(var i=!0,o=0;o<n.length;o++)if(n[o]==s[r].get("trackingId")){i=!1;break}i&&(n.push(s[r].get("trackingId")),tracker=s[r].get("name")+".send",window.ga(tracker,e.gaEventParams))}if(e.yaEventParams){e.yaEventParams.yaEventName||(e.yaEventParams.yaEventName="k50Callback");var a=Object.keys(window),l=!1,u=/^yaCounter/;for(r=0;r<a.length&&(!u.test(a[r])||(l=a[r],"object"!=typeof window[l]));r++);if(l&&"object"==typeof window[l])window[l]._inited&&window[l].reachGoal(e.yaEventParams.yaEventName)}}};var newMessage=function(e){if(""!==e.data&&"https://collect.k50.ru"==e.origin){try{var t=JSON.parse(e.data)}catch(e){console.log(e);t={cookies:{}}}if(t.cookies.k50uuid&&"undefined"!==t.cookies.k50uuid)setCookie(t.cookies.k50uuid.replace(/[{"}]/g,""),"k50uuid",self._settings.uuidInterval);else if("function"==typeof generateUUID){var s=window.frames.xdomain_cookie;getCookie("k50uuid")?self._uuid=getCookie("k50uuid"):self._uuid=generateUUID(),s.contentWindow.postMessage(JSON.stringify({uuid:self._uuid}),"https://collect.k50.ru")}window.removeEventListener("message",newMessage,!1),rotate()}};function openFrame(){document.createElement("iframe");var e=window.location.origin;e=e||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");rotate()}function openWidget(e){for(var t="https://collect.k50.ru/widget/"+self._settings.siteId+"/"+e+".js",s=document.getElementsByTagName("script"),n=0,r=0;r<s.length;r++)s[r].src===t&&(n=1);if(!n){var i=document.createElement("script");i.src=t,i.type="text/javascript",document.body.appendChild(i)}}function getServer(){if(!self._settings.servers.length)return{};var e=parseInt(self._settings.siteId);isNaN(e)&&console.warn("K50 Tracker Error: wrong siteId specified");var t=e%self._settings.mod,s=self._settings.mod/self._settings.servers.length,n=Math.floor(t/s);return{id:n,url:self._settings.servers[n]}}function getCookie(e){self._settings.cookiePrefix&&"k50cookie"===e&&(e=self._settings.cookiePrefix+"_"+e||e);for(var t=e+"=",s=document.cookie.split(";"),n=0;n<s.length;n++){if(0===(r=_trim(s[n])).indexOf(t))return r.substring(t.length,r.length).replace(/^"|"$/g,"")}if(/k50cookie/.test(e)&&(0===_instances.length||0<_instances.length&&self._settings.siteId===_instances[0]._settings.siteId))for(n=0;n<s.length;n++){var r;if(0===(r=_trim(s[n])).indexOf("k50cookie="))return r.substring(10,r.length).replace(/^"|"$/g,"")}return null}function setCookie(e,t,s){self._settings.cookiePrefix&&"k50cookie"==t&&(t=self._settings.cookiePrefix+"_"+t||t);var n=new Date;n.setTime(n.getTime()+60*s*1e3);var r="expires="+n.toUTCString(),i="."+_simple_domain("http://"+location.host);document.cookie=t+"="+e+"; path=/; domain="+i+"; "+r}function isRobot(){var e=navigator.userAgent.toLowerCase(),t=document.referrer;return!!(~e.indexOf("bot")&&!~e.indexOf("cubot")||~e.indexOf("spider")||~e.indexOf("crawl")||~e.indexOf("curl")||~e.indexOf("search")&&!~e.indexOf("yasearch")&&!~e.indexOf("yandexsearch")||~e.indexOf("seek"))||~t.indexOf("metrika.yandex.ru/stat/visor/player")||~t.indexOf("metrika.yandex.ru/inpage/visor-player")||~t.indexOf("webvisor")}function isNewVisit(){var e=getCookie("k50lastvisit");if("object"==typeof e)return!0;var t=e.split(".");if(t){var s=getVisitParamsHash(!1).split(".");return Number(s[4])>Number(t[4])+6e4*self._settings.sessionInterval||(t[3]!==s[3]&&"da39a3ee5e6b4b0d3255bfef95601890afd80709"!==s[3]||s[0]!==t[0]&&s[0]!==s[2]&&("da39a3ee5e6b4b0d3255bfef95601890afd80709"!==s[1]&&t[1]!==s[1]))}return setCookie(getVisitParamsHash(!0),"k50lastvisit",self._settings.lastVisit),!0}function getVisitParams(){var e=getLocalData(),t="";t=!1!==self._settings.landing?self._settings.landing:document.URL;var s=document.referrer,n="";n=e.landing?e.landing:t;return{referrer:e.referrer?e.referrer:s,landing:n,currentPage:t,previousPage:s,timestamp:(new Date).getTime()}}function getVisitParamsHash(e){var t="";t=!1!==self._settings.landing?self._settings.landing:document.URL;for(var s=["utm_content","utm_term","utm_campaign","utm_source","utm_medium","gclid","yclid"],n="",r=0;r<s.length;r++)n+=getParameterByName(s[r],t);var i=sha1(document.referrer),o=sha1(n);if(e){var a=getCookie("k50lastvisit");null!=a&&"object"!=typeof a&&(i=(a=a.split("."))[1],o=a[3])}var l=(new Date).getTime();return[sha1(_simple_domain(document.referrer)),i,sha1(_simple_domain(t)),o,l].join(".")}function setLocalData(){var e={};e.landing=document.URL,e.referrer=document.referrer,localStorage.setItem("k50Tracker",k50JSON.stringify(e))}function getLocalData(){var e=localStorage.getItem("k50Tracker");return e?k50JSON.parse(e):{}}function sendRequest(e,t,s,n,r){var i,o=[],a=getServer(),l="https:"+a.url+e;if(r=!0,null!=a.id){for(var u in s)o.push(encodeURIComponent(u)+"="+encodeURIComponent(s[u]));try{if("undefined"!=typeof XDomainRequest)throw{};(i=new XMLHttpRequest).open(t,l,r),"POST"==t&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?"function"==typeof n&&n(i.responseText):d())};try{i.send(o.join("&"))}catch(e){console.warn("K50 Tracker Error: "+e.message),d()}}catch(e){var c=document.createElement("script");"function"==typeof n&&(c.onreadystatechange=c.onload=function(){try{n(k50JSON.stringify(k50RotatorResult))}catch(e){}}),~l.indexOf("/rotate/")?c.src=l+="/js?"+o.join("&"):c.src=l+="?_format=js&"+o.join("&"),document.getElementsByTagName("head")[0].appendChild(c)}}function d(){self._sendRetries++,self._settings.servers.length&&(3==self._sendRetries&&(self._settings.servers.splice(a.id,1),setCookie(self._settings.servers.join(","),"k50servers",5),self._sendRetries=0),setTimeout(function(){sendRequest(e,t,s,n,r)},5e3*self._sendRetries))}}function replaceDomData(e,r){if(/{.*}/.test(e)){_forEach(e.split(/\s*,\s*/),function(e){var t=e.match(/(.+?)?(?:.?[>\+~].?)?{(.*)}/),s=null,n=null;3==t.length&&(s=t[1]?document.querySelectorAll(t[1]):document.querySelectorAll("body"),n=t[2]),s&&n&&_forEach(s,function(e){!function s(e,n,r){_forEach(e.childNodes,function(e){if(e.childNodes.length)s(e,n,r);else{var t=new RegExp(n,"gi");e.data&&t.test(e.data)&&(e.data=e.data.replace(t,r))}})}(e,n,r)})})}else{var t=document.querySelectorAll(e);t&&_forEach(t,function(e){e.innerHTML=r})}}var Code=(gb=self,{setCode:function(e){e.code&&gb._settings.cssSelector1&&replaceDomData(gb._settings.cssSelector1,function(e){return e.toString().match(new RegExp(".{1,4}$|.{1,3}","g")).join("-")}(e.code))}}),gb,Phone=(lb=self,{setNumber:function(e){if(e.phones)for(var t=0;t<e.phones.length;t++)e.phones[t].number_formatted&&(lb._settings.cssSelectors&&0<lb._settings.cssSelectors.length?replaceDomData(lb._settings.cssSelectors[t],e.phones[t].number_formatted):replaceDomData(lb._settings["cssSelector"+(t+1)],e.phones[t].number_formatted))}}),lb,Analytics={sendClientId:pb};function pb(){if("function"==typeof window.ga&&"function"==typeof window.ga.getAll)if(ga.getAll()[0]){var e=ga.getAll()[0].get("clientId");if(e){var t=k50JSON.stringify({analyticsClientId:e});sendRequest(self._settings.urlParams+"/"+self._settings.siteId,"POST",{sid:self._result.sid,params:t})}else qb()}else qb();else qb()}function qb(){setTimeout(function(){pb()},1e3)}var Metrika={sendMetrikaClientId:ub};function ub(){for(var e=Object.keys(window),t=!1,s=/^yaCounter/,n=0;n<e.length&&(!s.test(e[n])||(t=e[n],"object"!=typeof window[t]));n++);if(t&&"object"==typeof window[t])if(window[t]._inited){var r=window[t].getClientID();if(r){var i=k50JSON.stringify({metrikaClientId:r});sendRequest(self._settings.urlParams+"/"+self._settings.siteId,"POST",{sid:self._result.sid,params:i})}else vb()}else vb();else vb()}function vb(){setTimeout(function(){ub()},1e3)}},init=function(e){var t=e.siteId,s=!1;if(t||(console.error("k50Tracker: \u0432\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043b\u0438 siteId \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430"),s=!0),_forEach(_instances,function(e){t==e._settings.siteId&&(console.warn("k50Tracker: \u0441\u0447\u0435\u0442\u0447\u0438\u043a \u0441 siteId "+t+" \u0443\u0436\u0435 \u043f\u0440\u043e\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d"),s=!0)}),!s){e.cookiePrefix=e.siteId;var n=new _k50Tracker;return _instances.push(n),n.init(e),n}},change=function(t,s){void 0===t&&(t=!1),void 0===s&&(s=!1),_forEach(_instances,function(e){e.change(t,s)})},getResultData=function(){return _instances[0].getResultData()},planCallback=function(e){return _instances[0].planCallback(e)},sendEvent=function(e){return _instances[0].sendEvent(e)};function _forEach(e,t){for(var s=0;s<e.length;s++)t.apply(this,[e[s],s,this])}function _trim(e){return e.replace(/^\s+|\s+$/g,"")}function utmMismatch(e,t){utms=["utm_content","utm_term","utm_campaign","utm_source","utm_medium"];for(var s=0;s<utms.length;s++)if(getParameterByName(utms[s],e)!=getParameterByName(utms[s],t)&&""!=getParameterByName(utms[s],t))return!0;return!1}function getParameterByName(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===s?"":s[1].replace(/\+/g," ")}function _simple_domain(e){var t=e.match(/^https?\:\/\/(?:[a-z_\u0430-\u044f\d-]*\.)*([^\/?#]+)[.]([a-z\u0430-\u044f\d-]*)(?:[\/?#]|$)/i);return null==t?null:t[1]+"."+t[2]}return{init:init,change:change,getResultData:getResultData,planCallback:planCallback,sendEvent:sendEvent}}();if("object"!=typeof k50DomReady)var k50DomReady=function(){var t,s,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},c={isReady:!1,readyWait:1,holdReady:function(e){e?c.readyWait++:c.ready(!0)},ready:function(e){if(!0===e&&!--c.readyWait||!0!==e&&!c.isReady){if(!document.body)return setTimeout(c.ready,1);if((c.isReady=!0)!==e&&0<--c.readyWait)return;t.resolveWith(document,[c])}},bindReady:function(){if(!t){if(t=c._Deferred(),"complete"===document.readyState)return setTimeout(c.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",c.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",s),window.attachEvent("onload",c.ready);var e=!1;try{e=null==window.frameElement}catch(e){}document.documentElement.doScroll&&e&&r()}}},_Deferred:function(){var o,s,a,l=[],u={done:function(){if(!a){var e,t,s,n,r,i=arguments;for(o&&(r=o,o=0),e=0,t=i.length;e<t;e++)s=i[e],"array"===(n=c.type(s))?u.done.apply(u,s):"function"===n&&l.push(s);r&&u.resolveWith(r[0],r[1])}return this},resolveWith:function(e,t){if(!a&&!o&&!s){t=t||[],s=1;try{for(;l[0];)l.shift().apply(e,t)}finally{o=[e,t],s=0}}return this},resolve:function(){return u.resolveWith(this,arguments),this},isResolved:function(){return!(!s&&!o)},cancel:function(){return a=1,l=[],this}};return u},type:function(e){return null==e?String(e):n[Object.prototype.toString.call(e)]||"object"}};function r(){if(!c.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(r,1)}c.ready()}}return document.addEventListener?s=function(){document.removeEventListener("DOMContentLoaded",s,!1),c.ready()}:document.attachEvent&&(s=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",s),c.ready())}),function(e){c.bindReady(),c.type(e),t.done(e)}}();function utf8_encode(e){return unescape((0,window.encodeURIComponent)(e))}function sha1(e){function t(e,t){return e<<t|e>>>32-t}function s(e){var t,s="";for(t=7;0<=t;t--)s+=(e>>>4*t&15).toString(16);return s}var n,r,i,o,a,l,u,c,d,f,g=[],p=1732584193,m=4023233417,h=2562383102,v=271733878,_=3285377520,y=[];for(f=(e=utf8_encode(e)).length,r=0;r<f-3;r+=4)i=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),y.push(i);switch(3&f){case 0:r=2147483648;break;case 1:r=e.charCodeAt(f-1)<<24|8388608;break;case 2:r=e.charCodeAt(f-2)<<24|e.charCodeAt(f-1)<<16|32768;break;case 3:r=e.charCodeAt(f-3)<<24|e.charCodeAt(f-2)<<16|e.charCodeAt(f-1)<<8|128}for(y.push(r);14!=(15&y.length);)y.push(0);for(y.push(f>>>29),y.push(f<<3&4294967295),n=0;n<y.length;n+=16){for(r=0;r<16;r++)g[r]=y[n+r];for(r=16;r<=79;r++)g[r]=t(g[r-3]^g[r-8]^g[r-14]^g[r-16],1);for(o=p,a=m,l=h,u=v,c=_,r=0;r<=19;r++)d=t(o,5)+(a&l|~a&u)+c+g[r]+1518500249&4294967295,c=u,u=l,l=t(a,30),a=o,o=d;for(r=20;r<=39;r++)d=t(o,5)+(a^l^u)+c+g[r]+1859775393&4294967295,c=u,u=l,l=t(a,30),a=o,o=d;for(r=40;r<=59;r++)d=t(o,5)+(a&l|a&u|l&u)+c+g[r]+2400959708&4294967295,c=u,u=l,l=t(a,30),a=o,o=d;for(r=60;r<=79;r++)d=t(o,5)+(a^l^u)+c+g[r]+3395469782&4294967295,c=u,u=l,l=t(a,30),a=o,o=d;p=p+o&4294967295,m=m+a&4294967295,h=h+l&4294967295,v=v+u&4294967295,_=_+c&4294967295}return(d=s(p)+s(m)+s(h)+s(v)+s(_)).toLowerCase()}function generateUUID(){var e=new Date;return sha1((navigator.userAgent||"")+(navigator.appName||"")+e.getTime()+Math.random()).slice(0,16)}"object"!=typeof k50JSON&&(k50JSON=window.JSON||{}),function(){"use strict";function f(e){return e<10?"0"+e:e}function objectToJSON(e,t){var s=Object.prototype.toString.apply(e);return"[object Date]"===s?isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null:"[object String]"===s||"[object Number]"===s||"[object Boolean]"===s?e.valueOf():"[object Array]"!==s&&"function"==typeof e.toJSON?e.toJSON(t):e}var cx=new RegExp("[\0\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),pattern='\\\\\\"\0-\x1f\x7f-\x9f\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',escapable=new RegExp("["+pattern,"g"),gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var s,n,r,i,o,a=gap,l=t[e];switch(l&&"object"==typeof l&&(l=objectToJSON(l,e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,s=0;s<i;s+=1)o[s]=str(s,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(i=rep.length,s=0;s<i;s+=1)"string"==typeof rep[s]&&(r=str(n=rep[s],l))&&o.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&o.push(quote(n)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,r}}"function"!=typeof k50JSON.stringify&&(k50JSON.stringify=function(e,t,s){var n;if(indent=gap="","number"==typeof s)for(n=0;n<s;n+=1)indent+=" ";else"string"==typeof s&&(indent=s);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("k50JSON.stringify");return str("",{"":e})}),"function"!=typeof k50JSON.parse&&(k50JSON.parse=function(text,reviver){var j;function walk(e,t){var s,n,r=e[t];if(r&&"object"==typeof r)for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(void 0!==(n=walk(r,s))?r[s]=n:delete r[s]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),new RegExp("^[\\],:{}\\s]*$").test(text.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("k50JSON.parse")})}(),document.querySelectorAll||(document.querySelectorAll=function(e){for(var t=[],s=0,n=document.all,r=n.length,i=document.styleSheets.length?document.styleSheets:[document.createStyleSheet()],o=e.split(","),a=0;a<o.length;a++)i[0].addRule(o[a],"foo:bar");for(;s<r;s++)"bar"===n[s].currentStyle.foo&&t.push(n[s]);return t},document.querySelector=function(e){return document.querySelectorAll(e)[0]});